<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>精读解析器-1.0版本</title>
	<!-- PDF生成库 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

	<!-- 本地样式 -->
	<link rel="stylesheet" href="css/基本样式.css">
	<link rel="stylesheet" href="css/mainPage.css">
	<!-- 代码高亮 -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css" />
	<!-- CodeMirror 样式 & 主题 -->
	<!-- CodeMirror 样式 -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material.min.css">
	<style>

	</style>
</head>

<body>
	<canvas class="data-stream" id="particles-js"></canvas>
	<h1>精读解析器</h1>
	<p>内容格式示范</p>
	<textarea id="jsonInput" placeholder="输入数据流...">
	</textarea>
	<div class="button-group">
		<button onclick="convertJson()">解析</button>
		<button onclick="copyToClipboard()">颗皮</button>
		<button onclick="copyToClipboardDiv()">颗皮html class</button>
		<button onclick="copyToClipboardStyle()">复制style</button>
		<button onclick="clickToPDF()">点击制作PDF</button>
		<button onclick="convertClassToInlineStyleInId('output')">一键转换 class → style</button>
	</div>
	<section id="output">
		<section class="index">welcome to this tool</section>
	</section>

	<!-- CodeMirror 核心 & 语言 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
	<!-- 本地js导入 -->
	<script src="js/convertJson.js"></script>
	<script src="js/initializeData.js"></script>
	<script src="js/doPDF.js"></script>
	<script>
		let editor; // 全局变量,解析器的入口，全部内容通过这个解析

		document.addEventListener("DOMContentLoaded", function () {
		editor = CodeMirror.fromTextArea(document.getElementById("jsonInput"), {
			mode: { name: "javascript", json: true },
			lineNumbers: true,
			theme: "material",
			tabSize: 2,
			autoCloseBrackets: true,
		});

		initializeEditor();
	});


	function initializeEditor() {
		console.log("初始化测试");
		
		if (editor && typeof initialData !== 'undefined') {
			editor.setValue(JSON.stringify(initialData, null, 2));
		} else {
			console.warn("Editor 或 initialData 未定义");
		}
	}
		// 没有导入对于依赖，暂时抛弃
		// 初始化粒子背景
		// particlesJS('particles-js', {
		// 	particles: {
		// 		number: { value: 80 },
		// 		color: { value: '#00f3ff' },
		// 		shape: { type: 'circle' },
		// 		opacity: { value: 0.5 },
		// 		size: { value: 3 },
		// 		move: {
		// 			enable: true,
		// 			speed: 2,
		// 			direction: 'none',
		// 			random: true
		// 		}
		// 	}
		// });
		//初始化 
		document.addEventListener("DOMContentLoaded", function () {
			initializeEditor();
		});
	</script>
</body>
</html>
